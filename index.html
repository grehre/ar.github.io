<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>VEV-1.0</title>
	<script src=" https://cdn.jsdelivr.net/npm/jquery@3.7.1/dist/jquery.min.js "></script>
</head>

<body>
<style type="text/css">
	video {
  width: 100vh;
  height: auto;
}
</style>

	<video id="video" controls="controls">
	<source src="111.mp4" type="video/mp4">
</video>
        <div>
        
        <button id="speed0">0</button>
        <button id="speedpoint5">+&frac12</button>
        
        </div>
        
        <div id="log"></div>


<script type="text/javascript">

// var loop;
// var count;
// loop=setInterval(start,4000);
// function start()
// {
//     video.currentTime=3
//     setTimeout(function(){
//         video.currentTime=5
//     }, 3000);

// }



// 	let id = setTimeout(function log() { // запускаем наш stTimeout с интервалом 500мc
//     //video.currentTime=(Math.random() * (3.38 - 1.1000) + 1.1000).toFixed(4) // тут выполняются действия
//     console.log("1");

//     var start = new Date().getTime();
//   	for (var i = 0; i < 1e7; i++) {
// 	    if ((new Date().getTime() - start) > Math.random() * (5000 - 4000) + 4000){
// 	      break;
// 	    }
//   }
//   video.currentTime=(Math.random() * (9.9999 - 9.0000) + 9.0000).toFixed(4)
//   console.log("2");


//     id = setTimeout(log, 1000); // замещаем id новым setTimeout который ждет когда выполнится код выше, ждет пол секунды и опять выполняет функцию log
// }, 1000);


	
var id;
mod1();



	function mod1() {


			id = setTimeout(function log() { // запускаем наш stTimeout с интервалом 500мc
    //video.currentTime=(Math.random() * (3.38 - 1.1000) + 1.1000).toFixed(4) // тут выполняются действия
    //console.log("1");

    //var start = new Date().getTime();
  	//for (var i = 0; i < 1e7; i++) {
	 //   if ((new Date().getTime() - start) > Math.random() * (5000 - 4000) + 4000){
	  //    break;
	    //}
  //}
  let start_time, end_time;
  let maximum = 1;
  let minimum = 1;
  let mode =  Math.floor(Math.random() * (maximum - minimum + 1)) + minimum;
  //console.log("mode "+mode);

  if(mode==1){
  	start_time = 9.0000;
  	end_time = 12.8999;
  }
  else if(mode==2){
  	start_time = 1.1000;
  	end_time = 10.1999;
  }

  video.currentTime=(Math.random() * (end_time  - start_time) + start_time).toFixed(4)

  //console.log("2");
  


    id = setTimeout(log, 1000); // замещаем id новым setTimeout который ждет когда выполнится код выше, ждет пол секунды и опять выполняет функцию log
    
}, 1000);

	}


	function mod2(){
	
		id = setTimeout(function log() { // запускаем наш stTimeout с интервалом 500мc
    //video.currentTime=(Math.random() * (3.38 - 1.1000) + 1.1000).toFixed(4) // тут выполняются действия
    console.log("1");

    var start = new Date().getTime();
  	for (var i = 0; i < 1e7; i++) {
	    if ((new Date().getTime() - start) > Math.random() * (5000 - 4000) + 4000){
	      break;
	    }
  }
  video.currentTime=(Math.random() * (8.1999 - 1.1000) + 1.1000).toFixed(4)
  console.log("2");
  


    id = setTimeout(log, 1000); // замещаем id новым setTimeout который ждет когда выполнится код выше, ждет пол секунды и опять выполняет функцию log
    
}, 1000);
	}






var video = document.getElementById('video');
var log = document.getElementById('log');
var intervalRewind;
//var startSystemTime;
//var startVideoTime;

$(video).on('play',function(){
    video.playbackRate = 1.0;
    clearInterval(intervalRewind);
});
$(video).on('ended',function(){
    // this only happens when t=duration (not t==0)
    video.playbackRate = 1.0;
    video.currentTime = 0.0;
    clearInterval(intervalRewind);
});
$(video).on('pause',function(){
    video.playbackRate = 1.0;
    clearInterval(intervalRewind);
});
$("#speed0").click(function() {
    clearInterval(intervalRewind);
    video.playbackRate = 1.0;
    video.pause();
});

$("#speedpoint5").click(function() {
   setInterval(() => video.currentTime=3, 500);
});


function rewind(rewindSpeed) {    
   clearInterval(intervalRewind);
   var startSystemTime = new Date().getTime();
   var startVideoTime = video.currentTime;
   
   intervalRewind = setInterval(function(){
       video.playbackRate = 1.0;
       if(video.currentTime == 0){
           clearInterval(intervalRewind);
           video.pause();
       } else {
           var elapsed = new Date().getTime()-startSystemTime;
           log.textContent='Rewind Elapsed: '+elapsed.toFixed(3);
           video.currentTime = Math.max(startVideoTime - elapsed*rewindSpeed/1000.0, 0);
       }
   }, 30);
}

    
    
</script>
</body>


</html>
